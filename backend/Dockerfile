#
FROM python:3.10-slim

WORKDIR /app

# å®‰è£ç³»çµ±ä¾è³´ (æœ‰äº› Python å¥—ä»¶éœ€è¦ç·¨è­¯)
RUN apt-get update && apt-get install -y build-essential && rm -rf /var/lib/apt/lists/*

# å…ˆè¤‡è£½ requirements ä¸¦å®‰è£
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# ğŸ”¥ é—œéµï¼šè¤‡è£½æ‰€æœ‰ç¨‹å¼ç¢¼é€²å…¥æ˜ åƒæª”
COPY . .

# å‘Šè¨´ Docker æˆ‘å€‘æœƒç”¨ 8000 port
EXPOSE 8000

# ğŸš€ ç”Ÿç”¢ç’°å¢ƒå•Ÿå‹•æŒ‡ä»¤ï¼š
# 1. ç§»é™¤ --reload (ç”Ÿç”¢ç’°å¢ƒä¸éœ€è¦ç†±é‡è¼‰ï¼Œä¸”æœƒæ¶ˆè€—æ•ˆèƒ½)
# 2. ç¢ºä¿ app å…¥å£é»æ­£ç¢º (ä½ åŸæœ¬å¯« api:app)
CMD ["uvicorn", "api:app", "--host", "0.0.0.0", "--port", "8000"]